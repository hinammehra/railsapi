<center>
<h3><%= @page_header %></h3><br/>
</center><br/><br/>

<table class = "table table-striped table-bordered table-hover table-responsive">
	<tr class="info">
		<th class="col-xs-3"></th>
		<% @time_periods.each do |t| %>
			<th><%= t.name %></th>
		<% end %>
	</tr>

	<tr>
		<td>Total Qty</td>
		<% @stats_sum_per_t.each do |s| %>
			<td><%= number_with_delimiter(number_with_precision(s, precision: 2)) %></td>
		<% end %>
	</tr>
	<tr>
		<td><%= @average_time_specified.name %> Average</td>
		<% @stats_avg_per_t.each do |a| %>
			<td><%= number_with_delimiter(number_with_precision(a, precision: 2)) %></td>
		<% end %>
	</tr>	

</table>
<center><button class="button"><%= link_to "View Orders", action: 'view_orders_for_product', product_id: @product_id, product_name: @product_name %></button></center><br/><br/>



<div class="form-group" style="margin-left:550px;">
<%= form_tag({:action => "view_customer_stats_for_product"}, {:method => "get"}) do %>
   <div class="col-xs-3">
   <%= collection_select(:staff, :id, @staffs, :id, :nickname, {:include_blank => 'All Staff'}, {:class => 'form-control'}) %>
   </div>
   <%= hidden_field_tag :product_id, @product_id %>
   <%= hidden_field_tag :product_name, @product_name %>
   <%= submit_tag "Filter", class: 'btn btn-primary' %>
<% end %>
</div>

<table class = "table table-striped table-bordered table-hover table-responsive">

	<tr class="info">
		<th class="col-xs-2">Customer Name</th>
		<th class="col-xs-1">Sales Rep</th>
		<% @time_periods.each do |t| %>
			<th><%= t.name %></th>
		<% end %>
	</tr>

	<% @customer_id_name_map_sorted.each do |id, value| %>
		<tr>
			<td><%= link_to value[0], action: 'view_orders_for_product_and_customer', product_id: @product_id, product_name: @product_name, customer_id: id, customer_name: value[0] %></td>
			<% values = check_id_in_map(@stats_per_cell, id) %>
			<td><%= value[1] %></td>
			<% values.each do |v| %>
				<td class="num"><%= v %></td>
			<% end %>
		</tr>
	<% end %>

</table><br/>
