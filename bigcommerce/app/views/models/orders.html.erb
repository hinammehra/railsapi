<h3><center><%= @page_header %></center></h3><br/>
<div class="form-group container-fluid">
<%= form_tag({:action => "orders"}, {:method => "get"}) do %>
	<div class="col-xs-3 col-xs-offset-2">
   <%= text_field_tag('search', @search_text, placeholder: 'Search for Customer Name', class: 'form-control') %>
   </div>
   <div class="col-xs-2">
       <%= collection_select(:staff, :id, @staffs, :id, :nickname, {:include_blank => 'All Sales Reps'}, {:class => 'form-control'}) %>
   </div>   
   <div class="col-xs-2">
       <%= collection_select(:status, :id, @statuses, :id, :name, {:include_blank => 'All Statuses'}, {:class => 'form-control'}) %>
   </div>
   <%= hidden_field_tag :start_date, @start_date %>
   <%= hidden_field_tag :end_date, @end_date %>
   <%= submit_tag "Filter", class: 'btn btn-primary' %>
   <button class = "btn btn-primary"><%= link_to "Reset", action: "orders" %></button>
<% end %>
</div><br/>

<table class = "table table-striped table-bordered table-hover table-responsive">
	<tr>
		<th>Sales Rep</th>
		<th>Date</th>
		<th>Order Id</th>
		<th>Customer</th>
		<th>Status</th>
		<th>Qty</th>
		<th>Total</th>
	</tr>

	<% @orders.each do |o| %>

		<tr>

			<td class = "text"><%= o.customer.staff.nickname unless o.customer.nil? %></td>
			<td class = "text"><%= o.date_created.to_date %></td>
			<td class = "text"><%= link_to o.id, controller: "sales", action: "view_products_for_orderid", order_id: o.id %></td>
			<td class = "text"><%= link_to get_customer_name(o.customer), controller: "sales", action: "view_orders_for_customer", customer_id: o.customer_id %></td>
			<td class = "text"><%= o.status.name %></td>
			<td class = "num"><%= o.qty %></td>
			<td class = "num"><%= number_with_delimiter(number_with_precision(o.total_inc_tax, precision: 2)) %></td>

		</tr>

	<% end %>

</table>
<span style="float:right;margin-right:50px;font-size: 115%;"><%= will_paginate @orders %></span>
