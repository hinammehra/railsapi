<!-- edited by vchar on 20180805 -->

<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" name="viewport" />

<div class="row mb-3">
    <div class="col-12">
        <div class="card bg-light mt-1">
            <div class="card-header h3 text-center">Products Location</div>
            <div class="card-body form-inline">
                <div class="input-group col-xl col-lg col-md col-sm-12 mr-2 mb-2">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Winery</span>
                    </div>
                    <%= autocomplete_field_tag 'name', '', autocomplete_producer_name_activity_index_path, 
                        placeholder: 'Search Winery', id: 'winery_search', size: 23,
                        class: "form-control" %>
                </div>    
                <div class="input-group col-xl col-lg col-md col-sm-12 mb-2">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Product</span>
                    </div>
                    <%= autocomplete_field_tag 'name', '', autocomplete_product_no_ws_name_activity_index_path, 
                        placeholder: 'Search Product', id: 'product_search', size: 23,
                        class: "form-control" %>
                </div>    
            </div>
        </div>
    </div>
</div>

<%= form_tag({:controller => "product", :action => "update"}, {:method => "get"}) do %>
    <%= hidden_field_tag :location_update, true %>
    <div class="row">
        <div class="col">
            <div class="counting-table block"></div>
        </div>
    </div>
    <div class="row">
        <div class="col text-center">
            <%= submit_tag 'update', class: 'btn btn-primary'%>
            <%= submit_tag 'cancel', class: 'btn btn-warning'%>
            <%#= link_to 'Cancel', controller: 'sales', action: 'dashboard', class: 'btn btn-warning'%>
        </div>
    </div>
<% end %>

<script type="text/javascript">
    var product_table = $('.counting-table');

    $(document).on('railsAutocomplete.select', '#winery_search', function(event, data){
        // In view/status
        // Update last products / last order and everything else
        var link = "/product/fetch_product_winery?producer_id=" + data.item.id
        $.ajax({
            type: 'GET',
            url: link
        });
    });

    $(document).on('railsAutocomplete.select', '#product_search', function(event, data){
        // In view/status
        // Update last products / last order and everything else
        var link = "/product/fetch_product_winery?product_no_ws_id=" + data.item.id
        $.ajax({
            type: 'GET',
            url: link
        });
    });
</script>
